{"version":3,"file":"G2Ci5kOu.min.js","names":["audioContext: AudioContext | null","currentOscillators: OscillatorNode[]","currentGainNodes: GainNode[]","alarmInterval: number | null","lastTriggered: string | null"],"sources":["../../../../../client/simple/src/js/main/clock.ts"],"sourcesContent":["// SPDX-License-Identifier: AGPL-3.0-or-later\n\nimport { ready, endpoint, Endpoints } from \"../toolkit.ts\";\n\n// Audio context for Web Audio API sounds\nlet audioContext: AudioContext | null = null;\nlet currentOscillators: OscillatorNode[] = [];\nlet currentGainNodes: GainNode[] = [];\nlet alarmInterval: number | null = null;\n\n// Sound generators using Web Audio API\nconst AlarmSounds = {\n  // Peaceful sounds\n  gentle_birds: (ctx: AudioContext, volume: number): void => {\n    // Chirping birds - high frequency warbles\n    const playChirp = () => {\n      const osc = ctx.createOscillator();\n      const gain = ctx.createGain();\n      osc.type = \"sine\";\n      osc.frequency.setValueAtTime(2000 + Math.random() * 1000, ctx.currentTime);\n      osc.frequency.exponentialRampToValueAtTime(3000 + Math.random() * 500, ctx.currentTime + 0.05);\n      osc.frequency.exponentialRampToValueAtTime(1800 + Math.random() * 400, ctx.currentTime + 0.1);\n      gain.gain.setValueAtTime(0, ctx.currentTime);\n      gain.gain.linearRampToValueAtTime(volume * 0.3, ctx.currentTime + 0.02);\n      gain.gain.linearRampToValueAtTime(0, ctx.currentTime + 0.15);\n      osc.connect(gain).connect(ctx.destination);\n      osc.start(ctx.currentTime);\n      osc.stop(ctx.currentTime + 0.15);\n      currentOscillators.push(osc);\n      currentGainNodes.push(gain);\n    };\n    for (let i = 0; i < 5; i++) {\n      setTimeout(playChirp, i * 200 + Math.random() * 100);\n    }\n  },\n\n  ocean_waves: (ctx: AudioContext, volume: number): void => {\n    // White noise filtered to sound like waves\n    const bufferSize = ctx.sampleRate * 2;\n    const buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);\n    const data = buffer.getChannelData(0);\n    for (let i = 0; i < bufferSize; i++) {\n      data[i] = Math.random() * 2 - 1;\n    }\n    const noise = ctx.createBufferSource();\n    noise.buffer = buffer;\n    const filter = ctx.createBiquadFilter();\n    filter.type = \"lowpass\";\n    filter.frequency.setValueAtTime(400, ctx.currentTime);\n    filter.frequency.linearRampToValueAtTime(800, ctx.currentTime + 1);\n    filter.frequency.linearRampToValueAtTime(300, ctx.currentTime + 2);\n    const gain = ctx.createGain();\n    gain.gain.setValueAtTime(0, ctx.currentTime);\n    gain.gain.linearRampToValueAtTime(volume * 0.4, ctx.currentTime + 0.5);\n    gain.gain.linearRampToValueAtTime(volume * 0.2, ctx.currentTime + 1.5);\n    gain.gain.linearRampToValueAtTime(0, ctx.currentTime + 2);\n    noise.connect(filter).connect(gain).connect(ctx.destination);\n    noise.start();\n    noise.stop(ctx.currentTime + 2);\n    currentGainNodes.push(gain);\n  },\n\n  soft_chimes: (ctx: AudioContext, volume: number): void => {\n    // Wind chimes - multiple high harmonics\n    const frequencies = [523.25, 659.25, 783.99, 1046.5, 1318.5]; // C5, E5, G5, C6, E6\n    frequencies.forEach((freq, i) => {\n      setTimeout(() => {\n        const osc = ctx.createOscillator();\n        const gain = ctx.createGain();\n        osc.type = \"sine\";\n        osc.frequency.value = freq;\n        gain.gain.setValueAtTime(0, ctx.currentTime);\n        gain.gain.linearRampToValueAtTime(volume * 0.25, ctx.currentTime + 0.01);\n        gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 2);\n        osc.connect(gain).connect(ctx.destination);\n        osc.start();\n        osc.stop(ctx.currentTime + 2);\n        currentOscillators.push(osc);\n        currentGainNodes.push(gain);\n      }, i * 300);\n    });\n  },\n\n  morning_forest: (ctx: AudioContext, volume: number): void => {\n    // Combination of bird-like sounds and gentle rustling\n    // Low rumble (wind through trees)\n    const noise = ctx.createBufferSource();\n    const bufferSize = ctx.sampleRate * 2;\n    const buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);\n    const data = buffer.getChannelData(0);\n    for (let i = 0; i < bufferSize; i++) {\n      data[i] = Math.random() * 2 - 1;\n    }\n    noise.buffer = buffer;\n    const filter = ctx.createBiquadFilter();\n    filter.type = \"lowpass\";\n    filter.frequency.value = 200;\n    const gain = ctx.createGain();\n    gain.gain.value = volume * 0.15;\n    noise.connect(filter).connect(gain).connect(ctx.destination);\n    noise.start();\n    noise.stop(ctx.currentTime + 2);\n    currentGainNodes.push(gain);\n    // Bird sounds on top\n    AlarmSounds.gentle_birds(ctx, volume * 0.7);\n  },\n\n  // Moderate sounds\n  meditation_bell: (ctx: AudioContext, volume: number): void => {\n    // Deep resonant bell sound\n    const fundamental = 220; // A3\n    const harmonics = [1, 2.4, 3.8, 5.4];\n    harmonics.forEach((mult, i) => {\n      const osc = ctx.createOscillator();\n      const gain = ctx.createGain();\n      osc.type = \"sine\";\n      osc.frequency.value = fundamental * mult;\n      const harmGain = volume * (0.5 / (i + 1));\n      gain.gain.setValueAtTime(harmGain, ctx.currentTime);\n      gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 4);\n      osc.connect(gain).connect(ctx.destination);\n      osc.start();\n      osc.stop(ctx.currentTime + 4);\n      currentOscillators.push(osc);\n      currentGainNodes.push(gain);\n    });\n  },\n\n  gentle_piano: (ctx: AudioContext, volume: number): void => {\n    // Piano-like tones (C major arpeggio)\n    const notes = [261.63, 329.63, 392.0, 523.25]; // C4, E4, G4, C5\n    notes.forEach((freq, i) => {\n      setTimeout(() => {\n        const osc = ctx.createOscillator();\n        const osc2 = ctx.createOscillator();\n        const gain = ctx.createGain();\n        osc.type = \"triangle\";\n        osc2.type = \"sine\";\n        osc.frequency.value = freq;\n        osc2.frequency.value = freq * 2;\n        gain.gain.setValueAtTime(volume * 0.3, ctx.currentTime);\n        gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 1.5);\n        osc.connect(gain);\n        osc2.connect(gain);\n        gain.connect(ctx.destination);\n        osc.start();\n        osc2.start();\n        osc.stop(ctx.currentTime + 1.5);\n        osc2.stop(ctx.currentTime + 1.5);\n        currentOscillators.push(osc, osc2);\n        currentGainNodes.push(gain);\n      }, i * 400);\n    });\n  },\n\n  classic_alarm: (ctx: AudioContext, volume: number): void => {\n    // Classic mechanical alarm clock - dual bells\n    const ring = (time: number) => {\n      const osc = ctx.createOscillator();\n      const gain = ctx.createGain();\n      osc.type = \"square\";\n      osc.frequency.setValueAtTime(1200, ctx.currentTime + time);\n      gain.gain.setValueAtTime(0, ctx.currentTime + time);\n      gain.gain.linearRampToValueAtTime(volume * 0.2, ctx.currentTime + time + 0.01);\n      gain.gain.linearRampToValueAtTime(0, ctx.currentTime + time + 0.05);\n      osc.connect(gain).connect(ctx.destination);\n      osc.start(ctx.currentTime + time);\n      osc.stop(ctx.currentTime + time + 0.05);\n      currentOscillators.push(osc);\n      currentGainNodes.push(gain);\n    };\n    for (let i = 0; i < 20; i++) {\n      ring(i * 0.1);\n    }\n  },\n\n  digital_beep: (ctx: AudioContext, volume: number): void => {\n    // Simple digital watch beep pattern\n    const beep = (time: number, duration: number) => {\n      const osc = ctx.createOscillator();\n      const gain = ctx.createGain();\n      osc.type = \"square\";\n      osc.frequency.value = 1000;\n      gain.gain.setValueAtTime(volume * 0.25, ctx.currentTime + time);\n      gain.gain.setValueAtTime(0, ctx.currentTime + time + duration);\n      osc.connect(gain).connect(ctx.destination);\n      osc.start(ctx.currentTime + time);\n      osc.stop(ctx.currentTime + time + duration + 0.01);\n      currentOscillators.push(osc);\n      currentGainNodes.push(gain);\n    };\n    // Pattern: beep beep beep - beep beep beep\n    beep(0, 0.1);\n    beep(0.2, 0.1);\n    beep(0.4, 0.1);\n    beep(0.8, 0.1);\n    beep(1.0, 0.1);\n    beep(1.2, 0.1);\n  },\n\n  // Abrupt sounds\n  urgent_buzzer: (ctx: AudioContext, volume: number): void => {\n    // Industrial buzzer sound\n    const osc = ctx.createOscillator();\n    const osc2 = ctx.createOscillator();\n    const gain = ctx.createGain();\n    osc.type = \"sawtooth\";\n    osc2.type = \"square\";\n    osc.frequency.value = 150;\n    osc2.frequency.value = 155;\n    gain.gain.value = volume * 0.35;\n    osc.connect(gain);\n    osc2.connect(gain);\n    gain.connect(ctx.destination);\n    osc.start();\n    osc2.start();\n    // Pulsing\n    const lfo = ctx.createOscillator();\n    const lfoGain = ctx.createGain();\n    lfo.frequency.value = 8;\n    lfoGain.gain.value = volume * 0.15;\n    lfo.connect(lfoGain).connect(gain.gain);\n    lfo.start();\n    setTimeout(() => {\n      osc.stop();\n      osc2.stop();\n      lfo.stop();\n    }, 2000);\n    currentOscillators.push(osc, osc2, lfo);\n    currentGainNodes.push(gain, lfoGain);\n  },\n\n  retro_alarm: (ctx: AudioContext, volume: number): void => {\n    // Old-fashioned mechanical bell alarm (more aggressive)\n    const hit = (time: number, freq: number) => {\n      const osc = ctx.createOscillator();\n      const gain = ctx.createGain();\n      osc.type = \"triangle\";\n      osc.frequency.setValueAtTime(freq, ctx.currentTime + time);\n      osc.frequency.exponentialRampToValueAtTime(freq * 0.5, ctx.currentTime + time + 0.2);\n      gain.gain.setValueAtTime(volume * 0.4, ctx.currentTime + time);\n      gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + time + 0.2);\n      osc.connect(gain).connect(ctx.destination);\n      osc.start(ctx.currentTime + time);\n      osc.stop(ctx.currentTime + time + 0.2);\n      currentOscillators.push(osc);\n      currentGainNodes.push(gain);\n    };\n    for (let i = 0; i < 16; i++) {\n      hit(i * 0.125, i % 2 === 0 ? 2400 : 2000);\n    }\n  },\n\n  starship_alert: (ctx: AudioContext, volume: number): void => {\n    // Star Trek style alert - sweeping tones\n    const osc = ctx.createOscillator();\n    const gain = ctx.createGain();\n    osc.type = \"sine\";\n    gain.gain.value = volume * 0.35;\n    osc.connect(gain).connect(ctx.destination);\n    // Sweep up and down\n    osc.frequency.setValueAtTime(400, ctx.currentTime);\n    osc.frequency.linearRampToValueAtTime(800, ctx.currentTime + 0.5);\n    osc.frequency.linearRampToValueAtTime(400, ctx.currentTime + 1);\n    osc.frequency.linearRampToValueAtTime(800, ctx.currentTime + 1.5);\n    osc.frequency.linearRampToValueAtTime(400, ctx.currentTime + 2);\n    osc.start();\n    osc.stop(ctx.currentTime + 2);\n    currentOscillators.push(osc);\n    currentGainNodes.push(gain);\n  },\n\n  red_alert: (ctx: AudioContext, volume: number): void => {\n    // Emergency klaxon - very urgent\n    const osc = ctx.createOscillator();\n    const osc2 = ctx.createOscillator();\n    const gain = ctx.createGain();\n    osc.type = \"sawtooth\";\n    osc2.type = \"square\";\n    gain.gain.value = volume * 0.4;\n    osc.connect(gain);\n    osc2.connect(gain);\n    gain.connect(ctx.destination);\n    // Alternating two-tone siren\n    const pattern = [600, 450];\n    let idx = 0;\n    const interval = setInterval(() => {\n      osc.frequency.value = pattern[idx];\n      osc2.frequency.value = pattern[idx] * 1.5;\n      idx = (idx + 1) % 2;\n    }, 250);\n    osc.start();\n    osc2.start();\n    setTimeout(() => {\n      clearInterval(interval);\n      osc.stop();\n      osc2.stop();\n    }, 2000);\n    currentOscillators.push(osc, osc2);\n    currentGainNodes.push(gain);\n  }\n};\n\n// Stop any currently playing alarm\nconst stopAlarm = (): void => {\n  if (alarmInterval) {\n    clearInterval(alarmInterval);\n    alarmInterval = null;\n  }\n  for (const osc of currentOscillators) {\n    try {\n      osc.stop();\n    } catch {\n      // Already stopped\n    }\n  }\n  for (const gain of currentGainNodes) {\n    try {\n      gain.disconnect();\n    } catch {\n      // Already disconnected\n    }\n  }\n  currentOscillators = [];\n  currentGainNodes = [];\n};\n\n// Play alarm sound\nconst playAlarmSound = (soundName: string, volume: number): void => {\n  stopAlarm();\n\n  if (!audioContext) {\n    audioContext = new AudioContext();\n  }\n\n  const normalizedVolume = Math.max(0, Math.min(1, volume / 100));\n  const soundFn = AlarmSounds[soundName as keyof typeof AlarmSounds];\n\n  if (soundFn) {\n    soundFn(audioContext, normalizedVolume);\n  }\n};\n\n// Play alarm with repeat\nconst playAlarmWithRepeat = (soundName: string, volume: number): void => {\n  playAlarmSound(soundName, volume);\n  // Repeat every 3 seconds\n  alarmInterval = window.setInterval(() => {\n    playAlarmSound(soundName, volume);\n  }, 3000);\n};\n\n// Request notification permission\nconst requestNotificationPermission = async (): Promise<boolean> => {\n  if (!(\"Notification\" in window)) {\n    return false;\n  }\n  if (Notification.permission === \"granted\") {\n    return true;\n  }\n  if (Notification.permission !== \"denied\") {\n    const permission = await Notification.requestPermission();\n    return permission === \"granted\";\n  }\n  return false;\n};\n\n// Show browser notification\nconst showNotification = (title: string, body: string): void => {\n  if (Notification.permission === \"granted\") {\n    new Notification(title, {\n      body: body,\n      icon: \"/static/themes/simple/img/onlinefinder.png\",\n      requireInteraction: true\n    });\n  }\n};\n\n// Format time based on settings\nconst formatTime = (date: Date, format: string): { time: string; period: string } => {\n  let hours = date.getHours();\n  const minutes = date.getMinutes().toString().padStart(2, \"0\");\n  const seconds = date.getSeconds().toString().padStart(2, \"0\");\n  let period = \"\";\n\n  if (format === \"12h\") {\n    period = hours >= 12 ? \"PM\" : \"AM\";\n    hours = hours % 12 || 12;\n  }\n\n  const time = `${hours.toString().padStart(2, \"0\")}:${minutes}:${seconds}`;\n  return { time: time, period: period };\n};\n\n// Regex for parsing alarm time\nconst ALARM_TIME_REGEX = /^(\\d{1,2}):(\\d{2})$/;\n\n// Parse alarm time string (HH:MM)\nconst parseAlarmTime = (timeStr: string): { hours: number; minutes: number } | null => {\n  if (!timeStr) return null;\n  const match = timeStr.match(ALARM_TIME_REGEX);\n  if (!match) return null;\n  return {\n    hours: Number.parseInt(match[1], 10),\n    minutes: Number.parseInt(match[2], 10)\n  };\n};\n\n// Check if alarm should trigger\nconst checkAlarm = (alarmTime: { hours: number; minutes: number }, lastTriggered: string | null): boolean => {\n  const now = new Date();\n  const currentHours = now.getHours();\n  const currentMinutes = now.getMinutes();\n  const currentKey = `${currentHours}:${currentMinutes}`;\n\n  // Only trigger once per minute\n  if (lastTriggered === currentKey) return false;\n\n  return currentHours === alarmTime.hours && currentMinutes === alarmTime.minutes;\n};\n\nconst ALARM_TOGGLE_KEY = \"onlinefinder_alarm_enabled\";\n\nconst getAlarmToggleState = (preferenceEnabled: boolean): boolean => {\n  const stored = localStorage.getItem(ALARM_TOGGLE_KEY);\n  return stored === null ? preferenceEnabled : stored === \"true\";\n};\n\nconst setAlarmToggleState = (enabled: boolean): void => {\n  localStorage.setItem(ALARM_TOGGLE_KEY, String(enabled));\n};\n\n// Initialize clock\nconst initClock = (): void => {\n  const clockElement = document.getElementById(\"digital-clock\");\n  if (!clockElement) return;\n\n  const enabled = clockElement.dataset.enabled === \"true\";\n  if (!enabled) return;\n\n  // Show the clock\n  clockElement.style.display = \"block\";\n\n  const format = clockElement.dataset.format || \"12h\";\n  const alarmEnabledPref = clockElement.dataset.alarmEnabled === \"true\";\n  const alarmTimeStr = clockElement.dataset.alarmTime || \"\";\n  const alarmSound = clockElement.dataset.alarmSound || \"gentle_birds\";\n  const alarmVolume = Number.parseInt(clockElement.dataset.alarmVolume || \"50\", 10);\n\n  const clockTimeEl = document.getElementById(\"clock-time\");\n  const clockPeriodEl = document.getElementById(\"clock-period\");\n  const alarmIndicatorEl = document.getElementById(\"alarm-indicator\");\n  const alarmTimeDisplayEl = document.getElementById(\"alarm-time-display\");\n  const alarmToggleEl = document.getElementById(\"alarm-toggle\");\n\n  const alarmTime = parseAlarmTime(alarmTimeStr);\n\n  let alarmEnabled = getAlarmToggleState(alarmEnabledPref);\n\n  const getFormattedAlarmTime = (): string => {\n    if (!alarmTime) return \"\";\n    if (format === \"12h\") {\n      const h = alarmTime.hours % 12 || 12;\n      const p = alarmTime.hours >= 12 ? \"PM\" : \"AM\";\n      return `${h}:${alarmTime.minutes.toString().padStart(2, \"0\")} ${p}`;\n    }\n    return alarmTimeStr;\n  };\n\n  const updateAlarmIndicator = (): void => {\n    if (!alarmToggleEl || !alarmIndicatorEl || !alarmTimeDisplayEl) return;\n\n    if (!alarmEnabledPref) {\n      alarmToggleEl.style.display = \"none\";\n      alarmIndicatorEl.style.display = \"none\";\n      return;\n    }\n\n    alarmToggleEl.style.display = \"inline-flex\";\n\n    if (alarmEnabled) {\n      alarmToggleEl.classList.add(\"alarm-on\");\n      alarmToggleEl.classList.remove(\"alarm-off\");\n      if (alarmTime) {\n        alarmIndicatorEl.style.display = \"inline-flex\";\n        alarmTimeDisplayEl.textContent = getFormattedAlarmTime();\n      } else {\n        alarmIndicatorEl.style.display = \"inline-flex\";\n        alarmTimeDisplayEl.textContent = \"No time set\";\n      }\n    } else {\n      alarmToggleEl.classList.remove(\"alarm-on\");\n      alarmToggleEl.classList.add(\"alarm-off\");\n      alarmIndicatorEl.style.display = \"none\";\n    }\n  };\n\n  if (alarmToggleEl) {\n    alarmToggleEl.addEventListener(\"click\", () => {\n      alarmEnabled = !alarmEnabled;\n      setAlarmToggleState(alarmEnabled);\n      updateAlarmIndicator();\n    });\n  }\n\n  updateAlarmIndicator();\n\n  let lastTriggered: string | null = null;\n  let alarmActive = false;\n\n  // Update clock every second\n  const updateClock = (): void => {\n    const now = new Date();\n    const { time, period } = formatTime(now, format);\n\n    if (clockTimeEl) clockTimeEl.textContent = time;\n    if (clockPeriodEl) clockPeriodEl.textContent = period;\n\n    if (alarmTime && alarmEnabled && !alarmActive && checkAlarm(alarmTime, lastTriggered)) {\n      const currentKey = `${now.getHours()}:${now.getMinutes()}`;\n      lastTriggered = currentKey;\n      alarmActive = true;\n\n      playAlarmWithRepeat(alarmSound, alarmVolume);\n      showNotification(\"Alarm\", \"Your alarm is ringing!\");\n      clockElement.classList.add(\"alarm-ringing\");\n      const stopAlarmHandler = (): void => {\n        stopAlarm();\n        alarmActive = false;\n        clockElement.classList.remove(\"alarm-ringing\");\n        clockElement.removeEventListener(\"click\", stopAlarmHandler);\n      };\n\n      clockElement.addEventListener(\"click\", stopAlarmHandler);\n    }\n  };\n\n  // Initial update\n  updateClock();\n\n  // Update every second\n  setInterval(updateClock, 1000);\n};\n\n// Export for preferences page testing\n(window as Window & { testAlarmSound?: typeof playAlarmWithRepeat }).testAlarmSound = playAlarmWithRepeat;\n(window as Window & { stopAlarmSound?: typeof stopAlarm }).stopAlarmSound = stopAlarm;\n(window as Window & { requestNotificationPermission?: typeof requestNotificationPermission }).requestNotificationPermission =\n  requestNotificationPermission;\n\n// Initialize on index page\nready(initClock, { on: [endpoint === Endpoints.index] });\n"],"mappings":"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"}